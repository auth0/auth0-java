/**
 * This file was auto-generated by Fern from our API Definition.
 */
package com.auth0.client.mgmt;

import com.auth0.client.mgmt.actions.AsyncExecutionsClient;
import com.auth0.client.mgmt.actions.AsyncModulesClient;
import com.auth0.client.mgmt.actions.AsyncTriggersClient;
import com.auth0.client.mgmt.actions.AsyncVersionsClient;
import com.auth0.client.mgmt.core.ClientOptions;
import com.auth0.client.mgmt.core.RequestOptions;
import com.auth0.client.mgmt.core.Suppliers;
import com.auth0.client.mgmt.core.SyncPagingIterable;
import com.auth0.client.mgmt.types.Action;
import com.auth0.client.mgmt.types.CreateActionRequestContent;
import com.auth0.client.mgmt.types.CreateActionResponseContent;
import com.auth0.client.mgmt.types.DeleteActionRequestParameters;
import com.auth0.client.mgmt.types.DeployActionResponseContent;
import com.auth0.client.mgmt.types.GetActionResponseContent;
import com.auth0.client.mgmt.types.ListActionsRequestParameters;
import com.auth0.client.mgmt.types.TestActionRequestContent;
import com.auth0.client.mgmt.types.TestActionResponseContent;
import com.auth0.client.mgmt.types.UpdateActionRequestContent;
import com.auth0.client.mgmt.types.UpdateActionResponseContent;
import java.util.concurrent.CompletableFuture;
import java.util.function.Supplier;

public class AsyncActionsClient {
    protected final ClientOptions clientOptions;

    private final AsyncRawActionsClient rawClient;

    protected final Supplier<AsyncVersionsClient> versionsClient;

    protected final Supplier<AsyncExecutionsClient> executionsClient;

    protected final Supplier<AsyncModulesClient> modulesClient;

    protected final Supplier<AsyncTriggersClient> triggersClient;

    public AsyncActionsClient(ClientOptions clientOptions) {
        this.clientOptions = clientOptions;
        this.rawClient = new AsyncRawActionsClient(clientOptions);
        this.versionsClient = Suppliers.memoize(() -> new AsyncVersionsClient(clientOptions));
        this.executionsClient = Suppliers.memoize(() -> new AsyncExecutionsClient(clientOptions));
        this.modulesClient = Suppliers.memoize(() -> new AsyncModulesClient(clientOptions));
        this.triggersClient = Suppliers.memoize(() -> new AsyncTriggersClient(clientOptions));
    }

    /**
     * Get responses with HTTP metadata like headers
     */
    public AsyncRawActionsClient withRawResponse() {
        return this.rawClient;
    }

    /**
     * Retrieve all actions.
     */
    public CompletableFuture<SyncPagingIterable<Action>> list() {
        return this.rawClient.list().thenApply(response -> response.body());
    }

    /**
     * Retrieve all actions.
     */
    public CompletableFuture<SyncPagingIterable<Action>> list(ListActionsRequestParameters request) {
        return this.rawClient.list(request).thenApply(response -> response.body());
    }

    /**
     * Retrieve all actions.
     */
    public CompletableFuture<SyncPagingIterable<Action>> list(
            ListActionsRequestParameters request, RequestOptions requestOptions) {
        return this.rawClient.list(request, requestOptions).thenApply(response -> response.body());
    }

    /**
     * Create an action. Once an action is created, it must be deployed, and then bound to a trigger before it will be executed as part of a flow.
     */
    public CompletableFuture<CreateActionResponseContent> create(CreateActionRequestContent request) {
        return this.rawClient.create(request).thenApply(response -> response.body());
    }

    /**
     * Create an action. Once an action is created, it must be deployed, and then bound to a trigger before it will be executed as part of a flow.
     */
    public CompletableFuture<CreateActionResponseContent> create(
            CreateActionRequestContent request, RequestOptions requestOptions) {
        return this.rawClient.create(request, requestOptions).thenApply(response -> response.body());
    }

    /**
     * Retrieve an action by its ID.
     */
    public CompletableFuture<GetActionResponseContent> get(String id) {
        return this.rawClient.get(id).thenApply(response -> response.body());
    }

    /**
     * Retrieve an action by its ID.
     */
    public CompletableFuture<GetActionResponseContent> get(String id, RequestOptions requestOptions) {
        return this.rawClient.get(id, requestOptions).thenApply(response -> response.body());
    }

    /**
     * Deletes an action and all of its associated versions. An action must be unbound from all triggers before it can be deleted.
     */
    public CompletableFuture<Void> delete(String id) {
        return this.rawClient.delete(id).thenApply(response -> response.body());
    }

    /**
     * Deletes an action and all of its associated versions. An action must be unbound from all triggers before it can be deleted.
     */
    public CompletableFuture<Void> delete(String id, DeleteActionRequestParameters request) {
        return this.rawClient.delete(id, request).thenApply(response -> response.body());
    }

    /**
     * Deletes an action and all of its associated versions. An action must be unbound from all triggers before it can be deleted.
     */
    public CompletableFuture<Void> delete(
            String id, DeleteActionRequestParameters request, RequestOptions requestOptions) {
        return this.rawClient.delete(id, request, requestOptions).thenApply(response -> response.body());
    }

    /**
     * Update an existing action. If this action is currently bound to a trigger, updating it will &lt;strong&gt;not&lt;/strong&gt; affect any user flows until the action is deployed.
     */
    public CompletableFuture<UpdateActionResponseContent> update(String id) {
        return this.rawClient.update(id).thenApply(response -> response.body());
    }

    /**
     * Update an existing action. If this action is currently bound to a trigger, updating it will &lt;strong&gt;not&lt;/strong&gt; affect any user flows until the action is deployed.
     */
    public CompletableFuture<UpdateActionResponseContent> update(String id, UpdateActionRequestContent request) {
        return this.rawClient.update(id, request).thenApply(response -> response.body());
    }

    /**
     * Update an existing action. If this action is currently bound to a trigger, updating it will &lt;strong&gt;not&lt;/strong&gt; affect any user flows until the action is deployed.
     */
    public CompletableFuture<UpdateActionResponseContent> update(
            String id, UpdateActionRequestContent request, RequestOptions requestOptions) {
        return this.rawClient.update(id, request, requestOptions).thenApply(response -> response.body());
    }

    /**
     * Deploy an action. Deploying an action will create a new immutable version of the action. If the action is currently bound to a trigger, then the system will begin executing the newly deployed version of the action immediately. Otherwise, the action will only be executed as a part of a flow once it is bound to that flow.
     */
    public CompletableFuture<DeployActionResponseContent> deploy(String id) {
        return this.rawClient.deploy(id).thenApply(response -> response.body());
    }

    /**
     * Deploy an action. Deploying an action will create a new immutable version of the action. If the action is currently bound to a trigger, then the system will begin executing the newly deployed version of the action immediately. Otherwise, the action will only be executed as a part of a flow once it is bound to that flow.
     */
    public CompletableFuture<DeployActionResponseContent> deploy(String id, RequestOptions requestOptions) {
        return this.rawClient.deploy(id, requestOptions).thenApply(response -> response.body());
    }

    /**
     * Test an action. After updating an action, it can be tested prior to being deployed to ensure it behaves as expected.
     */
    public CompletableFuture<TestActionResponseContent> test(String id, TestActionRequestContent request) {
        return this.rawClient.test(id, request).thenApply(response -> response.body());
    }

    /**
     * Test an action. After updating an action, it can be tested prior to being deployed to ensure it behaves as expected.
     */
    public CompletableFuture<TestActionResponseContent> test(
            String id, TestActionRequestContent request, RequestOptions requestOptions) {
        return this.rawClient.test(id, request, requestOptions).thenApply(response -> response.body());
    }

    public AsyncVersionsClient versions() {
        return this.versionsClient.get();
    }

    public AsyncExecutionsClient executions() {
        return this.executionsClient.get();
    }

    public AsyncModulesClient modules() {
        return this.modulesClient.get();
    }

    public AsyncTriggersClient triggers() {
        return this.triggersClient.get();
    }
}
