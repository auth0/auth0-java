/**
 * This file was auto-generated by Fern from our API Definition.
 */
package com.auth0.client.mgmt.types;

import com.auth0.client.mgmt.core.NullableNonemptyFilter;
import com.auth0.client.mgmt.core.ObjectMappers;
import com.auth0.client.mgmt.core.OptionalNullable;
import com.fasterxml.jackson.annotation.JsonAnyGetter;
import com.fasterxml.jackson.annotation.JsonAnySetter;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.annotation.JsonSetter;
import com.fasterxml.jackson.annotation.Nulls;
import com.fasterxml.jackson.databind.annotation.JsonDeserialize;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Objects;
import java.util.Optional;
import org.jetbrains.annotations.Nullable;

@JsonInclude(JsonInclude.Include.NON_ABSENT)
@JsonDeserialize(builder = ConnectionOptionsOAuth2.Builder.class)
public final class ConnectionOptionsOAuth2 implements IConnectionOptionsCommon {
    private final Optional<List<String>> nonPersistentAttrs;

    private final Optional<Map<String, String>> authParams;

    private final Optional<Map<String, String>> authParamsMap;

    private final Optional<String> authorizationUrl;

    private final Optional<String> clientId;

    private final Optional<String> clientSecret;

    private final Optional<Map<String, String>> customHeaders;

    private final Optional<Map<String, String>> fieldsMap;

    private final Optional<String> iconUrl;

    private final Optional<String> logoutUrl;

    private final Optional<Boolean> pkceEnabled;

    private final Optional<ConnectionScopeOAuth2> scope;

    private final Optional<ConnectionScriptsOAuth2> scripts;

    private final Optional<ConnectionSetUserRootAttributesEnum> setUserRootAttributes;

    private final Optional<String> tokenUrl;

    private final OptionalNullable<Map<String, OptionalNullable<ConnectionUpstreamAdditionalProperties>>>
            upstreamParams;

    private final Optional<Boolean> useOauthSpecScope;

    private final Map<String, Object> additionalProperties;

    private ConnectionOptionsOAuth2(
            Optional<List<String>> nonPersistentAttrs,
            Optional<Map<String, String>> authParams,
            Optional<Map<String, String>> authParamsMap,
            Optional<String> authorizationUrl,
            Optional<String> clientId,
            Optional<String> clientSecret,
            Optional<Map<String, String>> customHeaders,
            Optional<Map<String, String>> fieldsMap,
            Optional<String> iconUrl,
            Optional<String> logoutUrl,
            Optional<Boolean> pkceEnabled,
            Optional<ConnectionScopeOAuth2> scope,
            Optional<ConnectionScriptsOAuth2> scripts,
            Optional<ConnectionSetUserRootAttributesEnum> setUserRootAttributes,
            Optional<String> tokenUrl,
            OptionalNullable<Map<String, OptionalNullable<ConnectionUpstreamAdditionalProperties>>> upstreamParams,
            Optional<Boolean> useOauthSpecScope,
            Map<String, Object> additionalProperties) {
        this.nonPersistentAttrs = nonPersistentAttrs;
        this.authParams = authParams;
        this.authParamsMap = authParamsMap;
        this.authorizationUrl = authorizationUrl;
        this.clientId = clientId;
        this.clientSecret = clientSecret;
        this.customHeaders = customHeaders;
        this.fieldsMap = fieldsMap;
        this.iconUrl = iconUrl;
        this.logoutUrl = logoutUrl;
        this.pkceEnabled = pkceEnabled;
        this.scope = scope;
        this.scripts = scripts;
        this.setUserRootAttributes = setUserRootAttributes;
        this.tokenUrl = tokenUrl;
        this.upstreamParams = upstreamParams;
        this.useOauthSpecScope = useOauthSpecScope;
        this.additionalProperties = additionalProperties;
    }

    @JsonProperty("non_persistent_attrs")
    @Override
    public Optional<List<String>> getNonPersistentAttrs() {
        return nonPersistentAttrs;
    }

    @JsonProperty("authParams")
    public Optional<Map<String, String>> getAuthParams() {
        return authParams;
    }

    @JsonProperty("authParamsMap")
    public Optional<Map<String, String>> getAuthParamsMap() {
        return authParamsMap;
    }

    @JsonProperty("authorizationURL")
    public Optional<String> getAuthorizationUrl() {
        return authorizationUrl;
    }

    @JsonProperty("client_id")
    public Optional<String> getClientId() {
        return clientId;
    }

    @JsonProperty("client_secret")
    public Optional<String> getClientSecret() {
        return clientSecret;
    }

    @JsonProperty("customHeaders")
    public Optional<Map<String, String>> getCustomHeaders() {
        return customHeaders;
    }

    @JsonProperty("fieldsMap")
    public Optional<Map<String, String>> getFieldsMap() {
        return fieldsMap;
    }

    @JsonProperty("icon_url")
    public Optional<String> getIconUrl() {
        return iconUrl;
    }

    @JsonProperty("logoutUrl")
    public Optional<String> getLogoutUrl() {
        return logoutUrl;
    }

    /**
     * @return When true, enables Proof Key for Code Exchange (PKCE) for the authorization code flow. PKCE provides additional security by preventing authorization code interception attacks.
     */
    @JsonProperty("pkce_enabled")
    public Optional<Boolean> getPkceEnabled() {
        return pkceEnabled;
    }

    @JsonProperty("scope")
    public Optional<ConnectionScopeOAuth2> getScope() {
        return scope;
    }

    @JsonProperty("scripts")
    public Optional<ConnectionScriptsOAuth2> getScripts() {
        return scripts;
    }

    @JsonProperty("set_user_root_attributes")
    public Optional<ConnectionSetUserRootAttributesEnum> getSetUserRootAttributes() {
        return setUserRootAttributes;
    }

    @JsonProperty("tokenURL")
    public Optional<String> getTokenUrl() {
        return tokenUrl;
    }

    @JsonInclude(value = JsonInclude.Include.CUSTOM, valueFilter = NullableNonemptyFilter.class)
    @JsonProperty("upstream_params")
    public OptionalNullable<Map<String, OptionalNullable<ConnectionUpstreamAdditionalProperties>>> getUpstreamParams() {
        if (upstreamParams == null) {
            return OptionalNullable.absent();
        }
        return upstreamParams;
    }

    /**
     * @return When true, uses space-delimited scopes (per OAuth 2.0 spec) instead of comma-delimited when calling the identity provider's authorization endpoint. Only relevant when using the connection_scope parameter. See https://auth0.com/docs/authenticate/identity-providers/adding-scopes-for-an-external-idp#pass-scopes-to-authorize-endpoint
     */
    @JsonProperty("useOauthSpecScope")
    public Optional<Boolean> getUseOauthSpecScope() {
        return useOauthSpecScope;
    }

    @JsonInclude(value = JsonInclude.Include.CUSTOM, valueFilter = NullableNonemptyFilter.class)
    @JsonProperty("upstream_params")
    private OptionalNullable<Map<String, OptionalNullable<ConnectionUpstreamAdditionalProperties>>>
            _getUpstreamParams() {
        return upstreamParams;
    }

    @Override
    public boolean equals(Object other) {
        if (this == other) return true;
        return other instanceof ConnectionOptionsOAuth2 && equalTo((ConnectionOptionsOAuth2) other);
    }

    @JsonAnyGetter
    public Map<String, Object> getAdditionalProperties() {
        return this.additionalProperties;
    }

    private boolean equalTo(ConnectionOptionsOAuth2 other) {
        return nonPersistentAttrs.equals(other.nonPersistentAttrs)
                && authParams.equals(other.authParams)
                && authParamsMap.equals(other.authParamsMap)
                && authorizationUrl.equals(other.authorizationUrl)
                && clientId.equals(other.clientId)
                && clientSecret.equals(other.clientSecret)
                && customHeaders.equals(other.customHeaders)
                && fieldsMap.equals(other.fieldsMap)
                && iconUrl.equals(other.iconUrl)
                && logoutUrl.equals(other.logoutUrl)
                && pkceEnabled.equals(other.pkceEnabled)
                && scope.equals(other.scope)
                && scripts.equals(other.scripts)
                && setUserRootAttributes.equals(other.setUserRootAttributes)
                && tokenUrl.equals(other.tokenUrl)
                && upstreamParams.equals(other.upstreamParams)
                && useOauthSpecScope.equals(other.useOauthSpecScope);
    }

    @Override
    public int hashCode() {
        return Objects.hash(
                this.nonPersistentAttrs,
                this.authParams,
                this.authParamsMap,
                this.authorizationUrl,
                this.clientId,
                this.clientSecret,
                this.customHeaders,
                this.fieldsMap,
                this.iconUrl,
                this.logoutUrl,
                this.pkceEnabled,
                this.scope,
                this.scripts,
                this.setUserRootAttributes,
                this.tokenUrl,
                this.upstreamParams,
                this.useOauthSpecScope);
    }

    @Override
    public String toString() {
        return ObjectMappers.stringify(this);
    }

    public static Builder builder() {
        return new Builder();
    }

    @JsonIgnoreProperties(ignoreUnknown = true)
    public static final class Builder {
        private Optional<List<String>> nonPersistentAttrs = Optional.empty();

        private Optional<Map<String, String>> authParams = Optional.empty();

        private Optional<Map<String, String>> authParamsMap = Optional.empty();

        private Optional<String> authorizationUrl = Optional.empty();

        private Optional<String> clientId = Optional.empty();

        private Optional<String> clientSecret = Optional.empty();

        private Optional<Map<String, String>> customHeaders = Optional.empty();

        private Optional<Map<String, String>> fieldsMap = Optional.empty();

        private Optional<String> iconUrl = Optional.empty();

        private Optional<String> logoutUrl = Optional.empty();

        private Optional<Boolean> pkceEnabled = Optional.empty();

        private Optional<ConnectionScopeOAuth2> scope = Optional.empty();

        private Optional<ConnectionScriptsOAuth2> scripts = Optional.empty();

        private Optional<ConnectionSetUserRootAttributesEnum> setUserRootAttributes = Optional.empty();

        private Optional<String> tokenUrl = Optional.empty();

        private OptionalNullable<Map<String, OptionalNullable<ConnectionUpstreamAdditionalProperties>>> upstreamParams =
                OptionalNullable.absent();

        private Optional<Boolean> useOauthSpecScope = Optional.empty();

        @JsonAnySetter
        private Map<String, Object> additionalProperties = new HashMap<>();

        private Builder() {}

        public Builder from(ConnectionOptionsOAuth2 other) {
            nonPersistentAttrs(other.getNonPersistentAttrs());
            authParams(other.getAuthParams());
            authParamsMap(other.getAuthParamsMap());
            authorizationUrl(other.getAuthorizationUrl());
            clientId(other.getClientId());
            clientSecret(other.getClientSecret());
            customHeaders(other.getCustomHeaders());
            fieldsMap(other.getFieldsMap());
            iconUrl(other.getIconUrl());
            logoutUrl(other.getLogoutUrl());
            pkceEnabled(other.getPkceEnabled());
            scope(other.getScope());
            scripts(other.getScripts());
            setUserRootAttributes(other.getSetUserRootAttributes());
            tokenUrl(other.getTokenUrl());
            upstreamParams(other.getUpstreamParams());
            useOauthSpecScope(other.getUseOauthSpecScope());
            return this;
        }

        @JsonSetter(value = "non_persistent_attrs", nulls = Nulls.SKIP)
        public Builder nonPersistentAttrs(Optional<List<String>> nonPersistentAttrs) {
            this.nonPersistentAttrs = nonPersistentAttrs;
            return this;
        }

        public Builder nonPersistentAttrs(List<String> nonPersistentAttrs) {
            this.nonPersistentAttrs = Optional.ofNullable(nonPersistentAttrs);
            return this;
        }

        @JsonSetter(value = "authParams", nulls = Nulls.SKIP)
        public Builder authParams(Optional<Map<String, String>> authParams) {
            this.authParams = authParams;
            return this;
        }

        public Builder authParams(Map<String, String> authParams) {
            this.authParams = Optional.ofNullable(authParams);
            return this;
        }

        @JsonSetter(value = "authParamsMap", nulls = Nulls.SKIP)
        public Builder authParamsMap(Optional<Map<String, String>> authParamsMap) {
            this.authParamsMap = authParamsMap;
            return this;
        }

        public Builder authParamsMap(Map<String, String> authParamsMap) {
            this.authParamsMap = Optional.ofNullable(authParamsMap);
            return this;
        }

        @JsonSetter(value = "authorizationURL", nulls = Nulls.SKIP)
        public Builder authorizationUrl(Optional<String> authorizationUrl) {
            this.authorizationUrl = authorizationUrl;
            return this;
        }

        public Builder authorizationUrl(String authorizationUrl) {
            this.authorizationUrl = Optional.ofNullable(authorizationUrl);
            return this;
        }

        @JsonSetter(value = "client_id", nulls = Nulls.SKIP)
        public Builder clientId(Optional<String> clientId) {
            this.clientId = clientId;
            return this;
        }

        public Builder clientId(String clientId) {
            this.clientId = Optional.ofNullable(clientId);
            return this;
        }

        @JsonSetter(value = "client_secret", nulls = Nulls.SKIP)
        public Builder clientSecret(Optional<String> clientSecret) {
            this.clientSecret = clientSecret;
            return this;
        }

        public Builder clientSecret(String clientSecret) {
            this.clientSecret = Optional.ofNullable(clientSecret);
            return this;
        }

        @JsonSetter(value = "customHeaders", nulls = Nulls.SKIP)
        public Builder customHeaders(Optional<Map<String, String>> customHeaders) {
            this.customHeaders = customHeaders;
            return this;
        }

        public Builder customHeaders(Map<String, String> customHeaders) {
            this.customHeaders = Optional.ofNullable(customHeaders);
            return this;
        }

        @JsonSetter(value = "fieldsMap", nulls = Nulls.SKIP)
        public Builder fieldsMap(Optional<Map<String, String>> fieldsMap) {
            this.fieldsMap = fieldsMap;
            return this;
        }

        public Builder fieldsMap(Map<String, String> fieldsMap) {
            this.fieldsMap = Optional.ofNullable(fieldsMap);
            return this;
        }

        @JsonSetter(value = "icon_url", nulls = Nulls.SKIP)
        public Builder iconUrl(Optional<String> iconUrl) {
            this.iconUrl = iconUrl;
            return this;
        }

        public Builder iconUrl(String iconUrl) {
            this.iconUrl = Optional.ofNullable(iconUrl);
            return this;
        }

        @JsonSetter(value = "logoutUrl", nulls = Nulls.SKIP)
        public Builder logoutUrl(Optional<String> logoutUrl) {
            this.logoutUrl = logoutUrl;
            return this;
        }

        public Builder logoutUrl(String logoutUrl) {
            this.logoutUrl = Optional.ofNullable(logoutUrl);
            return this;
        }

        /**
         * <p>When true, enables Proof Key for Code Exchange (PKCE) for the authorization code flow. PKCE provides additional security by preventing authorization code interception attacks.</p>
         */
        @JsonSetter(value = "pkce_enabled", nulls = Nulls.SKIP)
        public Builder pkceEnabled(Optional<Boolean> pkceEnabled) {
            this.pkceEnabled = pkceEnabled;
            return this;
        }

        public Builder pkceEnabled(Boolean pkceEnabled) {
            this.pkceEnabled = Optional.ofNullable(pkceEnabled);
            return this;
        }

        @JsonSetter(value = "scope", nulls = Nulls.SKIP)
        public Builder scope(Optional<ConnectionScopeOAuth2> scope) {
            this.scope = scope;
            return this;
        }

        public Builder scope(ConnectionScopeOAuth2 scope) {
            this.scope = Optional.ofNullable(scope);
            return this;
        }

        @JsonSetter(value = "scripts", nulls = Nulls.SKIP)
        public Builder scripts(Optional<ConnectionScriptsOAuth2> scripts) {
            this.scripts = scripts;
            return this;
        }

        public Builder scripts(ConnectionScriptsOAuth2 scripts) {
            this.scripts = Optional.ofNullable(scripts);
            return this;
        }

        @JsonSetter(value = "set_user_root_attributes", nulls = Nulls.SKIP)
        public Builder setUserRootAttributes(Optional<ConnectionSetUserRootAttributesEnum> setUserRootAttributes) {
            this.setUserRootAttributes = setUserRootAttributes;
            return this;
        }

        public Builder setUserRootAttributes(ConnectionSetUserRootAttributesEnum setUserRootAttributes) {
            this.setUserRootAttributes = Optional.ofNullable(setUserRootAttributes);
            return this;
        }

        @JsonSetter(value = "tokenURL", nulls = Nulls.SKIP)
        public Builder tokenUrl(Optional<String> tokenUrl) {
            this.tokenUrl = tokenUrl;
            return this;
        }

        public Builder tokenUrl(String tokenUrl) {
            this.tokenUrl = Optional.ofNullable(tokenUrl);
            return this;
        }

        @JsonSetter(value = "upstream_params", nulls = Nulls.SKIP)
        public Builder upstreamParams(
                @Nullable
                        OptionalNullable<Map<String, OptionalNullable<ConnectionUpstreamAdditionalProperties>>>
                                upstreamParams) {
            this.upstreamParams = upstreamParams;
            return this;
        }

        public Builder upstreamParams(
                Map<String, OptionalNullable<ConnectionUpstreamAdditionalProperties>> upstreamParams) {
            this.upstreamParams = OptionalNullable.of(upstreamParams);
            return this;
        }

        public Builder upstreamParams(
                Optional<Map<String, OptionalNullable<ConnectionUpstreamAdditionalProperties>>> upstreamParams) {
            if (upstreamParams.isPresent()) {
                this.upstreamParams = OptionalNullable.of(upstreamParams.get());
            } else {
                this.upstreamParams = OptionalNullable.absent();
            }
            return this;
        }

        public Builder upstreamParams(
                com.auth0.client.mgmt.core.Nullable<
                                Map<String, OptionalNullable<ConnectionUpstreamAdditionalProperties>>>
                        upstreamParams) {
            if (upstreamParams.isNull()) {
                this.upstreamParams = OptionalNullable.ofNull();
            } else if (upstreamParams.isEmpty()) {
                this.upstreamParams = OptionalNullable.absent();
            } else {
                this.upstreamParams = OptionalNullable.of(upstreamParams.get());
            }
            return this;
        }

        /**
         * <p>When true, uses space-delimited scopes (per OAuth 2.0 spec) instead of comma-delimited when calling the identity provider's authorization endpoint. Only relevant when using the connection_scope parameter. See https://auth0.com/docs/authenticate/identity-providers/adding-scopes-for-an-external-idp#pass-scopes-to-authorize-endpoint</p>
         */
        @JsonSetter(value = "useOauthSpecScope", nulls = Nulls.SKIP)
        public Builder useOauthSpecScope(Optional<Boolean> useOauthSpecScope) {
            this.useOauthSpecScope = useOauthSpecScope;
            return this;
        }

        public Builder useOauthSpecScope(Boolean useOauthSpecScope) {
            this.useOauthSpecScope = Optional.ofNullable(useOauthSpecScope);
            return this;
        }

        public ConnectionOptionsOAuth2 build() {
            return new ConnectionOptionsOAuth2(
                    nonPersistentAttrs,
                    authParams,
                    authParamsMap,
                    authorizationUrl,
                    clientId,
                    clientSecret,
                    customHeaders,
                    fieldsMap,
                    iconUrl,
                    logoutUrl,
                    pkceEnabled,
                    scope,
                    scripts,
                    setUserRootAttributes,
                    tokenUrl,
                    upstreamParams,
                    useOauthSpecScope,
                    additionalProperties);
        }
    }
}
