/**
 * This file was auto-generated by Fern from our API Definition.
 */
package com.auth0.client.mgmt.users;

import com.auth0.client.mgmt.core.ClientOptions;
import com.auth0.client.mgmt.core.RequestOptions;
import com.auth0.client.mgmt.types.DeleteUserIdentityResponseContentItem;
import com.auth0.client.mgmt.types.UserIdentity;
import com.auth0.client.mgmt.types.UserIdentityProviderEnum;
import com.auth0.client.mgmt.users.types.LinkUserIdentityRequestContent;
import java.util.List;

public class IdentitiesClient {
    protected final ClientOptions clientOptions;

    private final RawIdentitiesClient rawClient;

    public IdentitiesClient(ClientOptions clientOptions) {
        this.clientOptions = clientOptions;
        this.rawClient = new RawIdentitiesClient(clientOptions);
    }

    /**
     * Get responses with HTTP metadata like headers
     */
    public RawIdentitiesClient withRawResponse() {
        return this.rawClient;
    }

    /**
     * Link two user accounts together forming a primary and secondary relationship. On successful linking, the endpoint returns the new array of the primary account identities.
     * <p>Note: There are two ways of invoking the endpoint:</p>
     * <p><ul>
     *   <li>With the authenticated primary account's JWT in the Authorization header, which has the <code>update:current_user_identities</code> scope:
     *     <pre>
     *       POST /api/v2/users/PRIMARY_ACCOUNT_USER_ID/identities
     *       Authorization: &quot;Bearer PRIMARY_ACCOUNT_JWT&quot;
     *       {
     *         &quot;link_with&quot;: &quot;SECONDARY_ACCOUNT_JWT&quot;
     *       }
     *     </pre>
     *     In this case, only the <code>link_with</code> param is required in the body, which also contains the JWT obtained upon the secondary account's authentication.
     *   </li>
     *   <li>With a token generated by the API V2 containing the <code>update:users</code> scope:
     *     <pre>
     *     POST /api/v2/users/PRIMARY_ACCOUNT_USER_ID/identities
     *     Authorization: &quot;Bearer YOUR_API_V2_TOKEN&quot;
     *     {
     *       &quot;provider&quot;: &quot;SECONDARY_ACCOUNT_PROVIDER&quot;,
     *       &quot;connection_id&quot;: &quot;SECONDARY_ACCOUNT_CONNECTION_ID(OPTIONAL)&quot;,
     *       &quot;user_id&quot;: &quot;SECONDARY_ACCOUNT_USER_ID&quot;
     *     }
     *     </pre>
     *     In this case you need to send <code>provider</code> and <code>user_id</code> in the body. Optionally you can also send the <code>connection_id</code> param which is suitable for identifying a particular database connection for the 'auth0' provider.
     *   </li>
     * </ul></p>
     */
    public List<UserIdentity> link(String id) {
        return this.rawClient.link(id).body();
    }

    /**
     * Link two user accounts together forming a primary and secondary relationship. On successful linking, the endpoint returns the new array of the primary account identities.
     * <p>Note: There are two ways of invoking the endpoint:</p>
     * <p><ul>
     *   <li>With the authenticated primary account's JWT in the Authorization header, which has the <code>update:current_user_identities</code> scope:
     *     <pre>
     *       POST /api/v2/users/PRIMARY_ACCOUNT_USER_ID/identities
     *       Authorization: &quot;Bearer PRIMARY_ACCOUNT_JWT&quot;
     *       {
     *         &quot;link_with&quot;: &quot;SECONDARY_ACCOUNT_JWT&quot;
     *       }
     *     </pre>
     *     In this case, only the <code>link_with</code> param is required in the body, which also contains the JWT obtained upon the secondary account's authentication.
     *   </li>
     *   <li>With a token generated by the API V2 containing the <code>update:users</code> scope:
     *     <pre>
     *     POST /api/v2/users/PRIMARY_ACCOUNT_USER_ID/identities
     *     Authorization: &quot;Bearer YOUR_API_V2_TOKEN&quot;
     *     {
     *       &quot;provider&quot;: &quot;SECONDARY_ACCOUNT_PROVIDER&quot;,
     *       &quot;connection_id&quot;: &quot;SECONDARY_ACCOUNT_CONNECTION_ID(OPTIONAL)&quot;,
     *       &quot;user_id&quot;: &quot;SECONDARY_ACCOUNT_USER_ID&quot;
     *     }
     *     </pre>
     *     In this case you need to send <code>provider</code> and <code>user_id</code> in the body. Optionally you can also send the <code>connection_id</code> param which is suitable for identifying a particular database connection for the 'auth0' provider.
     *   </li>
     * </ul></p>
     */
    public List<UserIdentity> link(String id, RequestOptions requestOptions) {
        return this.rawClient.link(id, requestOptions).body();
    }

    /**
     * Link two user accounts together forming a primary and secondary relationship. On successful linking, the endpoint returns the new array of the primary account identities.
     * <p>Note: There are two ways of invoking the endpoint:</p>
     * <p><ul>
     *   <li>With the authenticated primary account's JWT in the Authorization header, which has the <code>update:current_user_identities</code> scope:
     *     <pre>
     *       POST /api/v2/users/PRIMARY_ACCOUNT_USER_ID/identities
     *       Authorization: &quot;Bearer PRIMARY_ACCOUNT_JWT&quot;
     *       {
     *         &quot;link_with&quot;: &quot;SECONDARY_ACCOUNT_JWT&quot;
     *       }
     *     </pre>
     *     In this case, only the <code>link_with</code> param is required in the body, which also contains the JWT obtained upon the secondary account's authentication.
     *   </li>
     *   <li>With a token generated by the API V2 containing the <code>update:users</code> scope:
     *     <pre>
     *     POST /api/v2/users/PRIMARY_ACCOUNT_USER_ID/identities
     *     Authorization: &quot;Bearer YOUR_API_V2_TOKEN&quot;
     *     {
     *       &quot;provider&quot;: &quot;SECONDARY_ACCOUNT_PROVIDER&quot;,
     *       &quot;connection_id&quot;: &quot;SECONDARY_ACCOUNT_CONNECTION_ID(OPTIONAL)&quot;,
     *       &quot;user_id&quot;: &quot;SECONDARY_ACCOUNT_USER_ID&quot;
     *     }
     *     </pre>
     *     In this case you need to send <code>provider</code> and <code>user_id</code> in the body. Optionally you can also send the <code>connection_id</code> param which is suitable for identifying a particular database connection for the 'auth0' provider.
     *   </li>
     * </ul></p>
     */
    public List<UserIdentity> link(String id, LinkUserIdentityRequestContent request) {
        return this.rawClient.link(id, request).body();
    }

    /**
     * Link two user accounts together forming a primary and secondary relationship. On successful linking, the endpoint returns the new array of the primary account identities.
     * <p>Note: There are two ways of invoking the endpoint:</p>
     * <p><ul>
     *   <li>With the authenticated primary account's JWT in the Authorization header, which has the <code>update:current_user_identities</code> scope:
     *     <pre>
     *       POST /api/v2/users/PRIMARY_ACCOUNT_USER_ID/identities
     *       Authorization: &quot;Bearer PRIMARY_ACCOUNT_JWT&quot;
     *       {
     *         &quot;link_with&quot;: &quot;SECONDARY_ACCOUNT_JWT&quot;
     *       }
     *     </pre>
     *     In this case, only the <code>link_with</code> param is required in the body, which also contains the JWT obtained upon the secondary account's authentication.
     *   </li>
     *   <li>With a token generated by the API V2 containing the <code>update:users</code> scope:
     *     <pre>
     *     POST /api/v2/users/PRIMARY_ACCOUNT_USER_ID/identities
     *     Authorization: &quot;Bearer YOUR_API_V2_TOKEN&quot;
     *     {
     *       &quot;provider&quot;: &quot;SECONDARY_ACCOUNT_PROVIDER&quot;,
     *       &quot;connection_id&quot;: &quot;SECONDARY_ACCOUNT_CONNECTION_ID(OPTIONAL)&quot;,
     *       &quot;user_id&quot;: &quot;SECONDARY_ACCOUNT_USER_ID&quot;
     *     }
     *     </pre>
     *     In this case you need to send <code>provider</code> and <code>user_id</code> in the body. Optionally you can also send the <code>connection_id</code> param which is suitable for identifying a particular database connection for the 'auth0' provider.
     *   </li>
     * </ul></p>
     */
    public List<UserIdentity> link(String id, LinkUserIdentityRequestContent request, RequestOptions requestOptions) {
        return this.rawClient.link(id, request, requestOptions).body();
    }

    /**
     * Unlink a specific secondary account from a target user. This action requires the ID of both the target user and the secondary account.
     * <p>Unlinking the secondary account removes it from the identities array of the target user and creates a new standalone profile for the secondary account. To learn more, review <a href="https://auth0.com/docs/manage-users/user-accounts/user-account-linking/unlink-user-accounts">Unlink User Accounts</a>.</p>
     */
    public List<DeleteUserIdentityResponseContentItem> delete(
            String id, UserIdentityProviderEnum provider, String userId) {
        return this.rawClient.delete(id, provider, userId).body();
    }

    /**
     * Unlink a specific secondary account from a target user. This action requires the ID of both the target user and the secondary account.
     * <p>Unlinking the secondary account removes it from the identities array of the target user and creates a new standalone profile for the secondary account. To learn more, review <a href="https://auth0.com/docs/manage-users/user-accounts/user-account-linking/unlink-user-accounts">Unlink User Accounts</a>.</p>
     */
    public List<DeleteUserIdentityResponseContentItem> delete(
            String id, UserIdentityProviderEnum provider, String userId, RequestOptions requestOptions) {
        return this.rawClient.delete(id, provider, userId, requestOptions).body();
    }
}
