/**
 * This file was auto-generated by Fern from our API Definition.
 */
package com.auth0.client.mgmt.users;

import com.auth0.client.mgmt.core.ClientOptions;
import com.auth0.client.mgmt.core.RequestOptions;
import com.auth0.client.mgmt.types.DeleteUserIdentityResponseContentItem;
import com.auth0.client.mgmt.types.UserIdentity;
import com.auth0.client.mgmt.types.UserIdentityProviderEnum;
import com.auth0.client.mgmt.users.types.LinkUserIdentityRequestContent;
import java.util.List;
import java.util.concurrent.CompletableFuture;

public class AsyncIdentitiesClient {
    protected final ClientOptions clientOptions;

    private final AsyncRawIdentitiesClient rawClient;

    public AsyncIdentitiesClient(ClientOptions clientOptions) {
        this.clientOptions = clientOptions;
        this.rawClient = new AsyncRawIdentitiesClient(clientOptions);
    }

    /**
     * Get responses with HTTP metadata like headers
     */
    public AsyncRawIdentitiesClient withRawResponse() {
        return this.rawClient;
    }

    /**
     * Link two user accounts together forming a primary and secondary relationship. On successful linking, the endpoint returns the new array of the primary account identities.
     * <p>Note: There are two ways of invoking the endpoint:</p>
     * <p>&lt;ul&gt;
     *   &lt;li&gt;With the authenticated primary account's JWT in the Authorization header, which has the &lt;code&gt;update:current_user_identities&lt;/code&gt; scope:
     *     &lt;pre&gt;
     *       POST /api/v2/users/PRIMARY_ACCOUNT_USER_ID/identities
     *       Authorization: &quot;Bearer PRIMARY_ACCOUNT_JWT&quot;
     *       {
     *         &quot;link_with&quot;: &quot;SECONDARY_ACCOUNT_JWT&quot;
     *       }
     *     &lt;/pre&gt;
     *     In this case, only the &lt;code&gt;link_with&lt;/code&gt; param is required in the body, which also contains the JWT obtained upon the secondary account's authentication.
     *   &lt;/li&gt;
     *   &lt;li&gt;With a token generated by the API V2 containing the &lt;code&gt;update:users&lt;/code&gt; scope:
     *     &lt;pre&gt;
     *     POST /api/v2/users/PRIMARY_ACCOUNT_USER_ID/identities
     *     Authorization: &quot;Bearer YOUR_API_V2_TOKEN&quot;
     *     {
     *       &quot;provider&quot;: &quot;SECONDARY_ACCOUNT_PROVIDER&quot;,
     *       &quot;connection_id&quot;: &quot;SECONDARY_ACCOUNT_CONNECTION_ID(OPTIONAL)&quot;,
     *       &quot;user_id&quot;: &quot;SECONDARY_ACCOUNT_USER_ID&quot;
     *     }
     *     &lt;/pre&gt;
     *     In this case you need to send &lt;code&gt;provider&lt;/code&gt; and &lt;code&gt;user_id&lt;/code&gt; in the body. Optionally you can also send the &lt;code&gt;connection_id&lt;/code&gt; param which is suitable for identifying a particular database connection for the 'auth0' provider.
     *   &lt;/li&gt;
     * &lt;/ul&gt;</p>
     */
    public CompletableFuture<List<UserIdentity>> link(String id) {
        return this.rawClient.link(id).thenApply(response -> response.body());
    }

    /**
     * Link two user accounts together forming a primary and secondary relationship. On successful linking, the endpoint returns the new array of the primary account identities.
     * <p>Note: There are two ways of invoking the endpoint:</p>
     * <p>&lt;ul&gt;
     *   &lt;li&gt;With the authenticated primary account's JWT in the Authorization header, which has the &lt;code&gt;update:current_user_identities&lt;/code&gt; scope:
     *     &lt;pre&gt;
     *       POST /api/v2/users/PRIMARY_ACCOUNT_USER_ID/identities
     *       Authorization: &quot;Bearer PRIMARY_ACCOUNT_JWT&quot;
     *       {
     *         &quot;link_with&quot;: &quot;SECONDARY_ACCOUNT_JWT&quot;
     *       }
     *     &lt;/pre&gt;
     *     In this case, only the &lt;code&gt;link_with&lt;/code&gt; param is required in the body, which also contains the JWT obtained upon the secondary account's authentication.
     *   &lt;/li&gt;
     *   &lt;li&gt;With a token generated by the API V2 containing the &lt;code&gt;update:users&lt;/code&gt; scope:
     *     &lt;pre&gt;
     *     POST /api/v2/users/PRIMARY_ACCOUNT_USER_ID/identities
     *     Authorization: &quot;Bearer YOUR_API_V2_TOKEN&quot;
     *     {
     *       &quot;provider&quot;: &quot;SECONDARY_ACCOUNT_PROVIDER&quot;,
     *       &quot;connection_id&quot;: &quot;SECONDARY_ACCOUNT_CONNECTION_ID(OPTIONAL)&quot;,
     *       &quot;user_id&quot;: &quot;SECONDARY_ACCOUNT_USER_ID&quot;
     *     }
     *     &lt;/pre&gt;
     *     In this case you need to send &lt;code&gt;provider&lt;/code&gt; and &lt;code&gt;user_id&lt;/code&gt; in the body. Optionally you can also send the &lt;code&gt;connection_id&lt;/code&gt; param which is suitable for identifying a particular database connection for the 'auth0' provider.
     *   &lt;/li&gt;
     * &lt;/ul&gt;</p>
     */
    public CompletableFuture<List<UserIdentity>> link(String id, LinkUserIdentityRequestContent request) {
        return this.rawClient.link(id, request).thenApply(response -> response.body());
    }

    /**
     * Link two user accounts together forming a primary and secondary relationship. On successful linking, the endpoint returns the new array of the primary account identities.
     * <p>Note: There are two ways of invoking the endpoint:</p>
     * <p>&lt;ul&gt;
     *   &lt;li&gt;With the authenticated primary account's JWT in the Authorization header, which has the &lt;code&gt;update:current_user_identities&lt;/code&gt; scope:
     *     &lt;pre&gt;
     *       POST /api/v2/users/PRIMARY_ACCOUNT_USER_ID/identities
     *       Authorization: &quot;Bearer PRIMARY_ACCOUNT_JWT&quot;
     *       {
     *         &quot;link_with&quot;: &quot;SECONDARY_ACCOUNT_JWT&quot;
     *       }
     *     &lt;/pre&gt;
     *     In this case, only the &lt;code&gt;link_with&lt;/code&gt; param is required in the body, which also contains the JWT obtained upon the secondary account's authentication.
     *   &lt;/li&gt;
     *   &lt;li&gt;With a token generated by the API V2 containing the &lt;code&gt;update:users&lt;/code&gt; scope:
     *     &lt;pre&gt;
     *     POST /api/v2/users/PRIMARY_ACCOUNT_USER_ID/identities
     *     Authorization: &quot;Bearer YOUR_API_V2_TOKEN&quot;
     *     {
     *       &quot;provider&quot;: &quot;SECONDARY_ACCOUNT_PROVIDER&quot;,
     *       &quot;connection_id&quot;: &quot;SECONDARY_ACCOUNT_CONNECTION_ID(OPTIONAL)&quot;,
     *       &quot;user_id&quot;: &quot;SECONDARY_ACCOUNT_USER_ID&quot;
     *     }
     *     &lt;/pre&gt;
     *     In this case you need to send &lt;code&gt;provider&lt;/code&gt; and &lt;code&gt;user_id&lt;/code&gt; in the body. Optionally you can also send the &lt;code&gt;connection_id&lt;/code&gt; param which is suitable for identifying a particular database connection for the 'auth0' provider.
     *   &lt;/li&gt;
     * &lt;/ul&gt;</p>
     */
    public CompletableFuture<List<UserIdentity>> link(
            String id, LinkUserIdentityRequestContent request, RequestOptions requestOptions) {
        return this.rawClient.link(id, request, requestOptions).thenApply(response -> response.body());
    }

    /**
     * Unlink a specific secondary account from a target user. This action requires the ID of both the target user and the secondary account.
     * <p>Unlinking the secondary account removes it from the identities array of the target user and creates a new standalone profile for the secondary account. To learn more, review &lt;a href=&quot;https://auth0.com/docs/manage-users/user-accounts/user-account-linking/unlink-user-accounts&quot;&gt;Unlink User Accounts&lt;/a&gt;.</p>
     */
    public CompletableFuture<List<DeleteUserIdentityResponseContentItem>> delete(
            String id, UserIdentityProviderEnum provider, String userId) {
        return this.rawClient.delete(id, provider, userId).thenApply(response -> response.body());
    }

    /**
     * Unlink a specific secondary account from a target user. This action requires the ID of both the target user and the secondary account.
     * <p>Unlinking the secondary account removes it from the identities array of the target user and creates a new standalone profile for the secondary account. To learn more, review &lt;a href=&quot;https://auth0.com/docs/manage-users/user-accounts/user-account-linking/unlink-user-accounts&quot;&gt;Unlink User Accounts&lt;/a&gt;.</p>
     */
    public CompletableFuture<List<DeleteUserIdentityResponseContentItem>> delete(
            String id, UserIdentityProviderEnum provider, String userId, RequestOptions requestOptions) {
        return this.rawClient.delete(id, provider, userId, requestOptions).thenApply(response -> response.body());
    }
}
